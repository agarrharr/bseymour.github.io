---
layout: single
author_profile: true
type: pages

title: 'Web Performance Optimisation: hour 3'
date: 2013-05-27T10:05:30+00:00
permalink: /2013/05/27/web-performance-optimisation-hour-3/
post_image:
  - /images/allbsuploads/2013/05/Screen-Shot-2013-05-27-at-10.50.24.png
categories:
  - HEADER
  - Mac
  - WebDev
---
Following on from [the 1st](http://allbs.co.uk/2013/05/19/web-performance-optimisation-hour-1/ "Web Performance Optimisation: hour 1"), [and 2nd](http://allbs.co.uk/2013/05/21/web-performance-optimisation-hour-2/ "Web Performance Optimisation: hour 2") hours spent, on improving the performance of one of my websites… the obsession continues&#8230;

&nbsp;

Now that the 1 week expires header has expired, my revised cache-control setting are now live. Re-running WebPageTest is now has Cache static content going from F -> A:

[<img style="display: block; float: none; margin-left: auto; margin-right: auto; border: 0px;" title="AAADA Screen Shot 2013-05-26 at 19.24.40" src="/images/allbsuploads/2013/05/AAADAScreenShot20130526at19.24.40_thumb.png" alt="AAADA Screen Shot 2013-05-26 at 19.24.40" width="404" height="110" border="0" />](/images/allbsuploads/2013/05/AAADAScreenShot20130526at19.24.40.png)

I spent 10 minutes on a few other minor tweaks to get PageSpeed : <span style="color: #ff6600;">99/100</span>

&#8211; minify HTML (using Sublime Text plugin ‘HTML Compressor’)

&#8211; leverage browser caching (“access plus 1 week” on CSS and JS)

&#8211; specify image dimensions (hurrah for Sublime Text’s multiple cursors)

&#8211; optimise one image I had overlooked (reducing size by around 250 bytes, but enough to keep PageSpeed happy) – I used the optimised image generated by PageSpeed for this.

[<img style="display: block; float: none; margin-left: auto; margin-right: auto; border: 0px;" title="Screen Shot 2013-05-26 at 22.01.07" src="/images/allbsuploads/2013/05/ScreenShot20130526at22.01.07_thumb.png" alt="Screen Shot 2013-05-26 at 22.01.07" width="504" height="217" border="0" />](/images/allbsuploads/2013/05/ScreenShot20130526at22.01.07.png)

&nbsp;

So with PageSpeed of 99/100, it just left me those that pesky<span style="color: #ff6600;"><strong> Compress Images ‘D’</strong> </span>from WebPageTest to address.

I undertook some ad-hoc testing of some of the solutions mentioned in the following blog post, starting with the two circled below, and punyPNG :

[www.netmagazine.com/features/best-image-compression-tools](http://www.netmagazine.com/features/best-image-compression-tools)

[<img style="display: block; float: none; margin-left: auto; margin-right: auto; border: 0px;" title="Screen Shot 2013-05-26 at 19.57.52" src="/images/allbsuploads/2013/05/ScreenShot20130526at19.57.52_thumb.png" alt="Screen Shot 2013-05-26 at 19.57.52" width="370" height="484" border="0" />](/images/allbsuploads/2013/05/ScreenShot20130526at19.57.52.png)

<a href="http://www.punypng.com/" target="_blank">punyPNG</a>, which is an online-only service which <a href="http://www.benhearn.com/how-to-speed-up-your-websites/" target="_blank">Ben Hearn’s performance blog post</a> highlighted, also looked potentially useful as it gave reasonable results for all 3 image formats:

[<img style="display: block; float: none; margin-left: auto; margin-right: auto; border: 0px;" title="Screen Shot 2013-05-27 at 09.32.03" src="/images/allbsuploads/2013/05/ScreenShot20130527at09.32.03_thumb.png" alt="Screen Shot 2013-05-27 at 09.32.03" width="460" height="484" border="0" />](/images/allbsuploads/2013/05/ScreenShot20130527at09.32.03.png)

It appeared to give some good results, but the free version only allows maximum of 15 images, of maximum size 150KB. The ‘Pro’ tier which allows a queue of 50 images, and up to 500KB per image, is only $6 per month, but if possibe I’d prefer to avoid another monthly subscription, however small.

&nbsp;

Next: <a href="http://nikkhokkho.sourceforge.net/static.php?page=FileOptimizer" target="_blank">FileOptimiser</a> , which scored well on the .net magazine’s test. It is Windows only, so I installed on a win7 VM running in VMWare Fusion.

Unfortunately, it kept giving me errors, and as I have queued 50 images, I got to see the following error rather a lot:

[<img style="display: block; float: none; margin-left: auto; margin-right: auto; border: 0px;" title="Screen Shot 2013-05-26 at 21.01.11" src="/images/allbsuploads/2013/05/ScreenShot20130526at21.01.11_thumb.png" alt="Screen Shot 2013-05-26 at 21.01.11" width="244" height="86" border="0" />](/images/allbsuploads/2013/05/ScreenShot20130526at21.01.11.png) I’m sure it’s something that could be investigated and resolved, but in the spirit of giving myself only a 1 hour slot, I would only circle back to this if I really needed to.

&nbsp;

Next:<span style="color: #ff6600;"><a href="http://www.balesio.com/fileminimizerpictures/eng/index.php" target="_blank"><span style="color: #ff6600;"><strong>FILEminimizer Pictures</strong></span></a></span> , another Windows only app, so I again installed on a win7 VM running in VMWare Fusion. This actually achieved some reasonable results, knocking another 600KB off a batch of those slider images, which had already been through JPEGmini once.

[<img style="display: inline; border: 0px;" title="FileMinimiser" src="/images/allbsuploads/2013/05/FileMinimiser_thumb.png" alt="FileMinimiser" width="504" height="420" border="0" />](/images/allbsuploads/2013/05/FileMinimiser.png)

&nbsp;

I wanted to see if this would finally make WebPageTest happy, but as my existing images now have cache-control expiry headers of 1 month, I needed to:

&#8211; set expiry headers to zero hours for the new images while testing

&#8211; rename the assets

&#8211; upload to AWS S3, remembering to ‘make public’

&#8211; updated the img references in my .html, and push it live

&#8211; rerun WebPageTest

&nbsp;

[<img style="display: block; float: none; margin-left: auto; margin-right: auto; border: 0px;" title="Screen Shot 2013-05-27 at 10.33.34" src="/images/allbsuploads/2013/05/ScreenShot20130527at10.33.34_thumb.png" alt="Screen Shot 2013-05-27 at 10.33.34" width="244" height="66" border="0" />](/images/allbsuploads/2013/05/ScreenShot20130527at10.33.34.png)

Caching is now an ‘F’ because of my temporary zero hours expiry headers, but** <span style="color: #ff6600;">‘compress images’ was now an ‘A’</span>**

&nbsp;

Having put the expiry headers back to 1 month (and invalidating the CDN for those items, so it is reflected live), I ran WebPageTest (and held my breath):

&nbsp;

[<img style="display: block; float: none; margin-left: auto; margin-right: auto; border: 0px;" title="Screen Shot 2013-05-27 at 10.36.57" src="/images/allbsuploads/2013/05/ScreenShot20130527at10.36.57_thumb.png" alt="Screen Shot 2013-05-27 at 10.36.57" width="424" height="309" border="0" />](/images/allbsuploads/2013/05/ScreenShot20130527at10.36.57.png)

and, huzzah… it’s finally there.

&nbsp;

This was by no means an exhaustive Image Optimisation tool test, but there were enough lessons learned to get me to my goal, and to do so <span style="text-decoration: underline;">fairly rapidly</span>.

&nbsp;

At the end of **<span style="color: #ff6600;">3 hours of Web Performance Optimisation</span>** activities, summary of results

PageSpeed: **<span style="color: #ff6600;">79/100  &#8211;>99/100</span>**

Fully loaded: 6.8s , request 42, bytes in: 3427 KB

<p align="left">
  to
</p>

Fully loaded: **<span style="color: #ff6600;">2.9s</span>** , requests 43, bytes in: **<span style="color: #ff6600;">691 KB</span>**

**<span style="color: #ff6600;">Page weight reduced by around 80%</span>**

**<span style="color: #ff6600;">Page load time reduced by nearly 60%</span>**

WebPageTest sequence of results:

[<img style="display: block; float: none; margin-left: auto; margin-right: auto; border: 0px;" title="AAFDFX Screen Shot 2013-05-21 at 20.47.39" src="/images/allbsuploads/2013/05/AAFDFXScreenShot20130521at20.47.39_thumb1.png" alt="AAFDFX Screen Shot 2013-05-21 at 20.47.39" width="244" height="68" border="0" />](/images/allbsuploads/2013/05/AAFDFXScreenShot20130521at20.47.391.png)[<img style="display: block; float: none; margin-left: auto; margin-right: auto; border: 0px;" title="Screen Shot 2013-05-19 at 15.33.58" src="/images/allbsuploads/2013/05/ScreenShot20130519at15.33.58_thumb.png" alt="Screen Shot 2013-05-19 at 15.33.58" width="244" height="64" border="0" />](/images/allbsuploads/2013/05/ScreenShot20130519at15.33.58.png)

[<img style="display: inline; border: 0px;" title="AAAAA Screen Shot 2013-05-27 at 09.47.08" src="/images/allbsuploads/2013/05/AAAAAScreenShot20130527at09.47.08_thumb.png" alt="AAAAA Screen Shot 2013-05-27 at 09.47.08" width="425" height="115" border="0" />](/images/allbsuploads/2013/05/AAAAAScreenShot20130527at09.47.08.png)

&nbsp;

&nbsp;

With practice, these activities will take less time to undertake, but I think that the improvements after just 3 hours were still definitely worth it. The lessons learned will certainly make some of these optimisations, configurations and new tools part of my standard project workflow.

&nbsp;

And once again thanks to Andy Davies (<a href="https://twitter.com/andydavies" target="_blank">@andydavies</a>) and the excellent half day workshop Andy ran the day before the 2013 <a href="http://port80events.co.uk/" target="_blank">Port80 conference</a>.

&nbsp;

(Next steps: I still need to defer my javascript loading, and look at lazy loading the images for my carousel.)
